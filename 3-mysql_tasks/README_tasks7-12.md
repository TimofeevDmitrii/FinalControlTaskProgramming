**Задание 6. Нарисовать диаграмму, в которой есть класс родительский класс, домашние
животные и вьючные животные, в составы которых в случае домашних
животных войдут классы: собаки, кошки, хомяки, а в класс вьючные животные
войдут: Лошади, верблюды и ослы).**


![Диаграмма классов](descr_tasks_7-12/diagramOfClasses.png)

Мною была создана следующая диаграмма классов. В первую очередь это схема применима к понятию ООП и следующему заданию по созданию приложения на языке Java.
На ее основе будет создаваться и структурироваться база данных в следующих заданиях (с 7 по 12). Однако на данном этапе будут использованы не все атрибуты из диаграммы
для классов животных, а только id (имеется ввиду  уникальный id животного среди всех в питомнике),  тип,  вид, кличка, дата рождения животного, его команды. 
Все они будут присутствовать в высокоуровневой (итоговой) таблице взадании 12.Также для наполнения базы данных не будем учитывать классы Mule, Deer, Rabbit, Mouse. 

Для работы с базами данных использовался сервер **MySQL 8.0**.


**Задание 7. В подключенном MySQL репозитории создать базу данных “Друзья
человека”
Задание 8. Создать таблицы с иерархией из диаграммы в БД
Задание 9. Заполнить низкоуровневые таблицы именами(животных), командами
которые они выполняют и датами рождения**

Для выполнения этих заданий напишем sql-скрипт, а затем будем использовать его содержимое для наполнения БД.

*Для данного блока заданий внутри директории 3-mysql_tasks/ создадим директорию task7_8_9/.*

Для начала создадим отдельные таблицы для каждого вида животных. Заранее подумаем об атрибутах и наполнении таблиц. В низкоуровневой таблице 
будут атрибуты кличка, дата рождения животного, его команды (а также id для идентификации в пределах конкретной таблицы).  

Создадим в рабочей директории (*3-mysql_tasks/task7_8_9*)  текстовые файлы с наполнением для таблиц: 

- cats.txt,
- dogs.txt,
- hamsters.txt,
- donkeys.txt,
- horses.txt,
- camels.txt

В каждом из них, как например в camels.txt, будут содержаться строки вида:

```
("Sand Bump", "2022-12-22", "Лежать; Подъем; Бежать галопом; Стой"),
("Bongo", "2020-01-02", "Лежать; Подъем; Бежать галопом; Стой"),
("Han", "2021-09-24", "Лежать; Подъем; Бежать галопом; Стой"),
("Dona", "2020-01-08", "Лежать; Подъем; Бежать галопом; Стой")
```

После этого создадим в рабочей директории файл **task7_8_9.sql**, в котором будет храниться sql код. Поместим в него следующие запросы:

```
-- DROP DATABASE human_friends;
CREATE DATABASE human_friends;
USE human_friends;
```

Далее напишем небольшой скрипт в файл *script.sh* и запустим его командной строке (предварительно выделив для этого файла право на выполнение):

```
#!/bin/bash
file_result=task7_8_9.sql;
for table_name in $(ls *txt | grep -o -e "^[A-Za-z]*"); do
    echo -e "CREATE TABLE $table_name (\n\tid SERIAL PRIMARY KEY,\n\tanimal_name VARCHAR(30) NOT NULL,\n\tbirth_date DATE DEFAULT (CURRENT_DATE),\n\tcommands TEXT\n\t);\n" >> $file_result;
    echo -e "INSERT INTO $table_name (animal_name, birth_date, commands)\nVALUES" >> $file_result;
    echo -e "$(cat $table_name.txt);\n\n" >> $file_result;
done;
exit
```

В результате выполнения данного скрипта файл task7\_8\_9.sql заполняется запросами на создание низкоуровневых таблиц с их дальнейшим наполнением 
(см даннй файл в директории 3-mysql\_tasks/task7\_8\_9)

Теперь в терминале выполним команду:
```
mysql –u root –p < task7_8_9.sql #вводим пароль по приглашению системы
```

В результате СУБД выполнит все запросы, которые были записаны в этот файл.
Зайдем в СУБД и проверим результат работы:

![Задание 7-8-9 скрин 1](descr_tasks_7-12/screenshot1.png)

![Задание 7-8-9 скрин 2](descr_tasks_7-12/screenshot2.png)

Теперь создадим среднеуровневые таблицы pack\_animals и pet\_animals, которые будут содержать дополнительный атрибут - тип животного. 
Остальные же атрибуты будут такими же, что и в низкоуровневых таблицах.  Пожалуй, одним из самых оптимальных вариантов будет создание новой таблицы через 
ключевое слово LIKE на основе одной из таблиц для животных, а затем добавление нового атрибута в таблицу. 
Запрос на создание таблицы pack\_animals будет выглядеть таким образом:
```
CREATE TABLE pack_animals LIKE camels;
ALTER TABLE pack_animals
ADD COLUMN animal_kind VARCHAR(30) NOT NULL AFTER animal_name;
INSERT INTO pack_animals (animal_name, animal_kind, birth_date, commands)
(SELECT animal_name, 'camel' AS animal_kind, birth_date, commands FROM camels
UNION
SELECT animal_name, 'horse' AS animal_kind, birth_date, commands FROM horses
UNION
SELECT animal_name, 'donkey' AS animal_kind, birth_date, commands FROM donkeys);
```

Аналогичным образом будет выглядеть запрос для pet\_animals. Запишем оба запроса в файл **task7_8_9_part2.sql** и запустим его на выполнение в СУБД  (см данный файл в директории 3-mysql\_tasks/task7\_8\_9):

![Задание 7-8-9 скрин 3](descr_tasks_7-12/screenshot3.png)

![Задание 7-8-9 скрин 4](descr_tasks_7-12/screenshot4.png)

На данном этапе можно при необходимости удалить низкоуровневые таблицы. В следующих задания будем работать с таблицами pet\_animals и pack\_animals.
